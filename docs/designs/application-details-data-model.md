# Application Details Data Model

## Overview

This document defines the data structure for job application tracking based on the ApplicationDetails form.

## Data Entity: JobApplication

### Job Details Section

| Field Name | Field ID      | Data Type | Required | Description                                      | Constraints                       |
| ---------- | ------------- | --------- | -------- | ------------------------------------------------ | --------------------------------- |
| Role       | `roleTitle`   | String    | Yes      | Job role/position title                          | Free text                         |
| Company    | `companyName` | String    | Yes      | Company name                                     | Free text                         |
| Role Type  | `roleType`    | String    | Yes      | Type of role (e.g., Full-time, Contract, Remote) | Predefined list with custom entry |
| Location   | `location`    | String    | Yes      | Job location                                     | Predefined list with custom entry |
| Salary     | `salary`      | String    | Yes      | Advertised salary range or amount                | Free text                         |

### Application Section

| Field Name    | Field ID       | Data Type | Required | Description                        | Constraints          |
| ------------- | -------------- | --------- | -------- | ---------------------------------- | -------------------- |
| Date Applied  | `dateApplied`  | Date      | No       | Date the application was submitted | ISO 8601 date format |
| Advert Link   | `advertLink`   | URL       | Yes      | Link to job advertisement          | Valid URL format     |
| CV Used       | `cvUsed`       | String    | No       | Name/version of CV submitted       | Free text            |
| Response Date | `responseDate` | Date      | No       | Date of employer response          | ISO 8601 date format |
| Status        | `status`       | String    | No       | Current application status         | Predefined list      |

### Contact Section

| Field Name    | Field ID       | Data Type | Required | Description                       | Constraints        |
| ------------- | -------------- | --------- | -------- | --------------------------------- | ------------------ |
| Contact Name  | `contactName`  | String    | No       | Name of company contact/recruiter | Free text          |
| Contact Email | `contactEmail` | Email     | No       | Email address of contact          | Valid email format |
| Contact Phone | `contactPhone` | String    | No       | Phone number of contact           | Free text          |

### System Fields

| Field Name | Field ID    | Data Type     | Required | Description                                     | Constraints                |
| ---------- | ----------- | ------------- | -------- | ----------------------------------------------- | -------------------------- |
| ID         | `id`        | String (CUID) | Yes      | Unique identifier for the application           | Auto-generated by database |
| Created At | `createdAt` | DateTime      | Yes      | Timestamp when record was created               | Auto-generated by database |
| Updated At | `updatedAt` | DateTime      | Yes      | Timestamp when record was last updated          | Auto-updated by database   |
| User ID    | `userId`    | String (CUID) | Yes      | Foreign key to User who created the application | References User.id         |

## Suggested Enumerations

### Role Type Options

- Full-time
- Part-time
- Contract
- Freelance
- Remote
- Hybrid
- On-site

### Status Options

- Applied
- Under Review
- Interview Scheduled
- Interviewed
- Offer Received
- Rejected
- Withdrawn
- Accepted

## Primary Key Strategy

**ID Type**: CUID (Collision-resistant Unique Identifier)

- **Generation**: Database-generated using Prisma's `@default(cuid())`
- **Format**: 25-character string (e.g., `ckl9j0x8q0000qzrmn7d4z8qg`)
- **Benefits**:
  - URL-safe and shorter than UUIDs
  - Chronologically sortable
  - Globally unique across distributed systems
  - Consistent with existing T3 stack models (User, Account, Session)

## Data Validation Rules

1. **Required Fields**: roleTitle, companyName, roleType, location, salary, advertLink
2. **URL Validation**: advertLink must be a valid URL
3. **Email Validation**: contactEmail must be a valid email format
4. **Date Validation**: dateApplied and responseDate must be valid dates
5. **Date Logic**: responseDate should not be before dateApplied
6. **User Association**: Every application must be associated with a valid userId

## Database Schema Considerations

```typescript
interface JobApplication {
  // System Fields
  id: string; // CUID, auto-generated
  createdAt: Date; // Auto-generated
  updatedAt: Date; // Auto-updated
  userId: string; // Foreign key to User

  // Job Details
  roleTitle: string;
  companyName: string;
  roleType: string;
  location: string;
  salary: string;

  // Application Details
  dateApplied?: Date;
  advertLink: string;
  cvUsed?: string;
  responseDate?: Date;
  status?: string;

  // Contact Information
  contactName?: string;
  contactEmail?: string;
  contactPhone?: string;
}
```

### Prisma Schema Example

```prisma
model JobApplication {
  id            String   @id @default(cuid())
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  userId        String

  roleTitle     String
  companyName   String
  roleType      String
  location      String
  salary        String

  dateApplied   DateTime?
  advertLink    String
  cvUsed        String?
  responseDate  DateTime?
  status        String?

  contactName   String?
  contactEmail  String?
  contactPhone  String?

  user          User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([companyName])
  @@index([status])
}
```
